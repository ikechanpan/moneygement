<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>家計簿アプリ</title>
</head>
<body>
  <h1>家計簿アプリ</h1>

  <form id="expense-form">
    <label>日付: <input type="date" id="date" required></label><br>
    <label>内容: <input type="text" id="item" required></label><br>
    <label>金額: <input type="number" id="amount" required></label><br>
    <button type="submit">保存</button>
  </form>

  <h2>登録済みの支出</h2>
  <ul id="expense-list"></ul>

  <script>
    const form = document.getElementById("expense-form");
    const list = document.getElementById("expense-list");

    form.addEventListener("submit", function (e) {
      e.preventDefault();
      const date = document.getElementById("date").value;
      const item = document.getElementById("item").value;
      const amount = document.getElementById("amount").value;

      // 表示に追加
      const li = document.createElement("li");
      li.textContent = `${date} - ${item} - ¥${amount}`;
      list.appendChild(li);

      // APIに送信
      fetch("https://moneygement-backend-production.up.railway.app/save", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          date: date,
          item: item,
          amount: amount
        })
      })
      .then(res => res.json())
      .then(data => console.log("保存成功", data))
      .catch(err => console.error("保存エラー", err));

      form.reset();
    });
  </script>
</body>
</html>
